import{c as S,d as p}from"./@babel-9169ff57.js";import{R as i,r as he}from"./react-5cc2acaa.js";import{K as V,x as ee,F as be}from"./rc-util-1f458f21.js";import{c as ae}from"./classnames-5c20d0be.js";function He(e){var l=e.pageXOffset,r="scrollLeft";if(typeof l!="number"){var n=e.document;l=n.documentElement[r],typeof l!="number"&&(l=n.body[r])}return l}function Ie(e){var l,r,n=e.ownerDocument,c=n.body,y=n&&n.documentElement,f=e.getBoundingClientRect();return l=f.left,r=f.top,l-=y.clientLeft||c.clientLeft||0,r-=y.clientTop||c.clientTop||0,{left:l,top:r}}function Se(e){var l=Ie(e),r=e.ownerDocument,n=r.defaultView||r.parentWindow;return l.left+=He(n),l.left}function Ve(e,l){var r=e.disabled,n=e.prefixCls,c=e.character,y=e.characterRender,f=e.index,k=e.count,C=e.value,_=e.allowHalf,R=e.focused,x=e.onHover,m=e.onClick,D=function(g){x(g,f)},F=function(g){m(g,f)},E=function(g){g.keyCode===V.ENTER&&m(g,f)},w=f+1,s=new Set([n]);C===0&&f===0&&R?s.add("".concat(n,"-focused")):_&&C+.5>=w&&C<w?(s.add("".concat(n,"-half")),s.add("".concat(n,"-active")),R&&s.add("".concat(n,"-focused"))):(w<=C?s.add("".concat(n,"-full")):s.add("".concat(n,"-zero")),w===C&&R&&s.add("".concat(n,"-focused")));var u=typeof c=="function"?c(e):c,h=i.createElement("li",{className:ae(Array.from(s)),ref:l},i.createElement("div",{onClick:r?null:F,onKeyDown:r?null:E,onMouseMove:r?null:D,role:"radio","aria-checked":C>f?"true":"false","aria-posinset":f+1,"aria-setsize":k,tabIndex:r?-1:0},i.createElement("div",{className:"".concat(n,"-first")},u),i.createElement("div",{className:"".concat(n,"-second")},u)));return y&&(h=y(h,e)),h}const _e=i.forwardRef(Ve);function xe(){var e=he.useRef({});function l(n){return e.current[n]}function r(n){return function(c){e.current[n]=c}}return[l,r]}function De(e,l){var r,n=e.prefixCls,c=n===void 0?"rc-rate":n,y=e.className,f=e.style,k=e.defaultValue,C=e.value,_=e.count,R=_===void 0?5:_,x=e.allowHalf,m=x===void 0?!1:x,D=e.allowClear,F=D===void 0?!0:D,E=e.character,w=E===void 0?"â˜…":E,s=e.characterRender,u=e.disabled,h=e.direction,b=h===void 0?"ltr":h,g=e.tabIndex,ne=g===void 0?0:g,te=e.autoFocus,H=e.onHoverChange,N=e.onChange,M=e.onFocus,K=e.onBlur,L=e.onKeyDown,re=xe(),A=S(re,2),le=A[0],oe=A[1],$=i.useRef(null),O=function(){if(!u){var a;(a=$.current)===null||a===void 0||a.focus()}};i.useImperativeHandle(l,function(){return{focus:O,blur:function(){if(!u){var a;(a=$.current)===null||a===void 0||a.blur()}}}});var ce=ee(k||0,{value:C}),X=S(ce,2),T=X[0],ue=X[1],ie=ee(null),z=S(ie,2),fe=z[0],B=z[1],G=function(a,d){var o=b==="rtl",t=a+1;if(m){var U=be(le(a)),Y=Se(U),Z=U.clientWidth;(o&&d-Y>Z/2||!o&&d-Y<Z/2)&&(t-=.5)}return t},I=function(a){ue(a),N==null||N(a)},de=i.useState(!1),P=S(de,2),se=P[0],W=P[1],ve=function(){W(!0),M==null||M()},me=function(){W(!1),K==null||K()},ge=i.useState(null),j=S(ge,2),q=j[0],J=j[1],Ce=function(a,d){var o=G(d,a.pageX);o!==fe&&(J(o),B(null)),H==null||H(o)},Q=function(){J(null),B(null),H==null||H(void 0)},Re=function(a,d){var o=G(d,a.pageX),t=!1;F&&(t=o===T),Q(),I(t?0:o),B(t?o:null)},ye=function(a){var d=a.keyCode,o=b==="rtl",t=T;d===V.RIGHT&&t<R&&!o?(m?t+=.5:t+=1,I(t),a.preventDefault()):d===V.LEFT&&t>0&&!o||d===V.RIGHT&&t>0&&o?(m?t-=.5:t-=1,I(t),a.preventDefault()):d===V.LEFT&&t<R&&o&&(m?t+=.5:t+=1,I(t),a.preventDefault()),L==null||L(a)};i.useEffect(function(){te&&!u&&O()},[]);var we=new Array(R).fill(0).map(function(v,a){return i.createElement(_e,{ref:oe(a),index:a,count:R,disabled:u,prefixCls:"".concat(c,"-star"),allowHalf:m,value:q===null?T:q,onClick:Re,onHover:Ce,key:a,character:w,characterRender:s,focused:se})});return i.createElement("ul",{className:ae(c,y,(r={},p(r,"".concat(c,"-disabled"),u),p(r,"".concat(c,"-rtl"),b==="rtl"),r)),style:f,onMouseLeave:u?null:Q,tabIndex:u?-1:ne,onFocus:u?null:ve,onBlur:u?null:me,onKeyDown:u?null:ye,ref:$,role:"radiogroup"},we)}const Me=i.forwardRef(De);export{Me as R};
