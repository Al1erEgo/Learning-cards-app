import{_ as fe,c as N,d as C,a as d,k as _e,l as Me,f as Pe,e as xe,m as ye,b as he,h as ze}from"./@babel-9169ff57.js";import{r as u}from"./react-5cc2acaa.js";import{c as le,o as Ae,y as Z,j as qe,s as Be,F as Ge}from"./rc-util-1f458f21.js";import{c as He}from"./classnames-5c20d0be.js";function ge(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function Je(t,e){var n={animationend:ge("Animation","AnimationEnd"),transitionend:ge("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var Xe=Je(le(),typeof window<"u"?window:{}),be={};if(le()){var Ye=document.createElement("div");be=Ye.style}var H={};function Oe(t){if(H[t])return H[t];var e=Xe[t];if(e)for(var n=Object.keys(e),r=n.length,a=0;a<r;a+=1){var s=n[a];if(Object.prototype.hasOwnProperty.call(e,s)&&s in be)return H[t]=e[s],H[t]}return""}var Ne=Oe("animationend"),De=Oe("transitionend"),Ve=!!(Ne&&De),Ce=Ne||"animationend",Te=De||"transitionend";function ke(t,e){if(!t)return null;if(fe(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}var K="none",J="appear",X="enter",Y="leave",Re="none",b="prepare",U="start",$="active",de="end";const Ze=function(){var t=u.useRef(null);function e(){Ae.cancel(t.current)}function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Ae(function(){a<=1?r({isCanceled:function(){return s!==t.current}}):n(r,a-1)});t.current=s}return u.useEffect(function(){return function(){e()}},[]),[n,e]};var we=le()?u.useLayoutEffect:u.useEffect,Le=[b,U,$,de],Fe=!1,et=!0;function je(t){return t===$||t===de}const tt=function(t,e){var n=Z(Re),r=N(n,2),a=r[0],s=r[1],i=Ze(),m=N(i,2),y=m[0],o=m[1];function c(){s(b,!0)}return we(function(){if(a!==Re&&a!==de){var v=Le.indexOf(a),f=Le[v+1],l=e(a);l===Fe?s(f,!0):y(function(h){function R(){h.isCanceled()||s(f,!0)}l===!0?R():Promise.resolve(l).then(R)})}},[t,a]),u.useEffect(function(){return function(){o()}},[]),[c,a]},nt=function(t){var e=u.useRef(),n=u.useRef(t);n.current=t;var r=u.useCallback(function(i){n.current(i)},[]);function a(i){i&&(i.removeEventListener(Te,r),i.removeEventListener(Ce,r))}function s(i){e.current&&e.current!==i&&a(e.current),i&&i!==e.current&&(i.addEventListener(Te,r),i.addEventListener(Ce,r),e.current=i)}return u.useEffect(function(){return function(){a(e.current)}},[]),[s,a]};function rt(t,e,n,r){var a=r.motionEnter,s=a===void 0?!0:a,i=r.motionAppear,m=i===void 0?!0:i,y=r.motionLeave,o=y===void 0?!0:y,c=r.motionDeadline,v=r.motionLeaveImmediately,f=r.onAppearPrepare,l=r.onEnterPrepare,h=r.onLeavePrepare,R=r.onAppearStart,_=r.onEnterStart,L=r.onLeaveStart,O=r.onAppearActive,M=r.onEnterActive,Q=r.onLeaveActive,F=r.onAppearEnd,T=r.onEnterEnd,P=r.onLeaveEnd,D=r.onVisibleChanged,ee=Z(),j=N(ee,2),k=j[0],V=j[1],A=Z(K),w=N(A,2),S=w[0],x=w[1],te=Z(null),q=N(te,2),W=q[0],me=q[1],ne=u.useRef(!1),re=u.useRef(null);function B(){return n()}var pe=u.useRef(!1);function Ee(p){var E=B();if(!(p&&!p.deadline&&p.target!==E)){var g=pe.current,G;S===J&&g?G=F==null?void 0:F(E,p):S===X&&g?G=T==null?void 0:T(E,p):S===Y&&g&&(G=P==null?void 0:P(E,p)),S!==K&&g&&G!==!1&&(x(K,!0),me(null,!0))}}var Ie=nt(Ee),Ke=N(Ie,1),Ue=Ke[0],z=u.useMemo(function(){var p,E,g;switch(S){case J:return p={},C(p,b,f),C(p,U,R),C(p,$,O),p;case X:return E={},C(E,b,l),C(E,U,_),C(E,$,M),E;case Y:return g={},C(g,b,h),C(g,U,L),C(g,$,Q),g;default:return{}}},[S]),$e=tt(S,function(p){if(p===b){var E=z[b];return E?E(B()):Fe}if(I in z){var g;me(((g=z[I])===null||g===void 0?void 0:g.call(z,B(),null))||null)}return I===$&&(Ue(B()),c>0&&(clearTimeout(re.current),re.current=setTimeout(function(){Ee({deadline:!0})},c))),et}),Se=N($e,2),Qe=Se[0],I=Se[1],We=je(I);pe.current=We,we(function(){V(e);var p=ne.current;if(ne.current=!0,!!t){var E;!p&&e&&m&&(E=J),p&&e&&s&&(E=X),(p&&!e&&o||!p&&v&&!e&&o)&&(E=Y),E&&(x(E),Qe())}},[e]),u.useEffect(function(){(S===J&&!m||S===X&&!s||S===Y&&!o)&&x(K)},[m,s,o]),u.useEffect(function(){return function(){ne.current=!1,clearTimeout(re.current)}},[]);var ae=u.useRef(!1);u.useEffect(function(){k&&(ae.current=!0),k!==void 0&&S===K&&((ae.current||k)&&(D==null||D(k)),ae.current=!0)},[k,S]);var ie=W;return z[b]&&I===U&&(ie=d({transition:"none"},ie)),[S,I,ie,k??e]}var at=function(t){_e(n,t);var e=Me(n);function n(){return Pe(this,n),e.apply(this,arguments)}return xe(n,[{key:"render",value:function(){return this.props.children}}]),n}(u.Component),it=u.createContext({});function ot(t){var e=t;fe(t)==="object"&&(e=t.transitionSupport);function n(a,s){return!!(a.motionName&&e&&s!==!1)}var r=u.forwardRef(function(a,s){var i=a.visible,m=i===void 0?!0:i,y=a.removeOnLeave,o=y===void 0?!0:y,c=a.forceRender,v=a.children,f=a.motionName,l=a.leavedClassName,h=a.eventProps,R=u.useContext(it),_=R.motion,L=n(a,_),O=u.useRef(),M=u.useRef();function Q(){try{return O.current instanceof HTMLElement?O.current:Ge(M.current)}catch{return null}}var F=rt(L,m,Q,a),T=N(F,4),P=T[0],D=T[1],ee=T[2],j=T[3],k=u.useRef(j);j&&(k.current=!0);var V=u.useCallback(function(W){O.current=W,qe(s,W)},[s]),A,w=d(d({},h),{},{visible:m});if(!v)A=null;else if(P===K||!n(a,_))j?A=v(d({},w),V):!o&&k.current&&l?A=v(d(d({},w),{},{className:l}),V):c||!o&&!l?A=v(d(d({},w),{},{style:{display:"none"}}),V):A=null;else{var S,x;D===b?x="prepare":je(D)?x="active":D===U&&(x="start"),A=v(d(d({},w),{},{className:He(ke(f,P),(S={},C(S,ke(f,"".concat(P,"-").concat(x)),x),C(S,f,typeof f=="string"),S)),style:ee}),V)}if(u.isValidElement(A)&&Be(A)){var te=A,q=te.ref;q||(A=u.cloneElement(A,{ref:V}))}return u.createElement(at,{ref:M},A)});return r.displayName="CSSMotion",r}const ut=ot(Ve);var ue="add",se="keep",ce="remove",oe="removed";function st(t){var e;return t&&fe(t)==="object"&&"key"in t?e=t:e={key:t},d(d({},e),{},{key:String(e.key)})}function ve(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(st)}function ct(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,a=e.length,s=ve(t),i=ve(e);s.forEach(function(o){for(var c=!1,v=r;v<a;v+=1){var f=i[v];if(f.key===o.key){r<v&&(n=n.concat(i.slice(r,v).map(function(l){return d(d({},l),{},{status:ue})})),r=v),n.push(d(d({},f),{},{status:se})),r+=1,c=!0;break}}c||n.push(d(d({},o),{},{status:ce}))}),r<a&&(n=n.concat(i.slice(r).map(function(o){return d(d({},o),{},{status:ue})})));var m={};n.forEach(function(o){var c=o.key;m[c]=(m[c]||0)+1});var y=Object.keys(m).filter(function(o){return m[o]>1});return y.forEach(function(o){n=n.filter(function(c){var v=c.key,f=c.status;return v!==o||f!==ce}),n.forEach(function(c){c.key===o&&(c.status=se)})}),n}var vt=["component","children","onVisibleChanged","onAllRemoved"],ft=["status"],lt=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function dt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ut,n=function(r){_e(s,r);var a=Me(s);function s(){var i;Pe(this,s);for(var m=arguments.length,y=new Array(m),o=0;o<m;o++)y[o]=arguments[o];return i=a.call.apply(a,[this].concat(y)),C(ye(i),"state",{keyEntities:[]}),C(ye(i),"removeKey",function(c){var v=i.state.keyEntities,f=v.map(function(l){return l.key!==c?l:d(d({},l),{},{status:oe})});return i.setState({keyEntities:f}),f.filter(function(l){var h=l.status;return h!==oe}).length}),i}return xe(s,[{key:"render",value:function(){var m=this,y=this.state.keyEntities,o=this.props,c=o.component,v=o.children,f=o.onVisibleChanged,l=o.onAllRemoved,h=he(o,vt),R=c||u.Fragment,_={};return lt.forEach(function(L){_[L]=h[L],delete h[L]}),delete h.keys,u.createElement(R,h,y.map(function(L){var O=L.status,M=he(L,ft),Q=O===ue||O===se;return u.createElement(e,ze({},_,{key:M.key,visible:Q,eventProps:M,onVisibleChanged:function(T){if(f==null||f(T,{key:M.key}),!T){var P=m.removeKey(M.key);P===0&&l&&l()}}}),v)}))}}],[{key:"getDerivedStateFromProps",value:function(m,y){var o=m.keys,c=y.keyEntities,v=ve(o),f=ct(c,v);return{keyEntities:f.filter(function(l){var h=c.find(function(R){var _=R.key;return l.key===_});return!(h&&h.status===oe&&l.status===ce)})}}}]),s}(u.Component);return C(n,"defaultProps",{component:"div"}),n}const yt=dt(Ve);export{ut as C,yt as a};
